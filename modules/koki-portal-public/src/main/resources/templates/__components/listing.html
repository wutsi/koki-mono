<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="listing-status-badge(listing)" th:remove="tag">
    <span class="listing-status badge"
          th:classappend="${listing.statusSold} ? 'text-bg-danger' : 'text-bg-primary'"
          th:text="#{'listing-status.' + ${listing.status}} + ' ' + ${listing.soldAtText}"
    >STATUS</span>
</div>

<div class="listing-carousel" th:fragment="listing-carousel(listings, showSummary)">
    <div th:each="listing : ${listings}" th:remove="tag">
        <div th:replace="~{__components/listing :: listing-card(${listing}, ${showSummary})}"></div>
    </div>
</div>

<div class="listing-card" th:data-id="${listing.id}" th:fragment="listing-card(listing, showSummary)">
    <a th:href="${listing.publicUrl}">
        <div class="listing-status-container">
            <div th:if="${listing.statusSold}" th:remove="tag">
                <div th:replace="~{__components/listing :: listing-status-badge(${listing})}"></div>
            </div>
        </div>
        <div class="hero-image-container flex flex-center">
            <img class="hero-image" th:alt="${listing.title}"
                 th:src="${listing.heroImageUrl} ? ${listing.heroImageUrl} : '/image/no-image.png'"
                 th:title="${listing.title}"
            />
        </div>
    </a>
    <div class="listing-details padding-small">
        <a th:href="${listing.publicUrl}">
            <b class="listing-price" th:if="!${listing.statusSold}" th:text="${listing.price.displayText}">$$$</b>

            <div class="text-small flex">
                <div th:if="!${listing.propertyTypeResidential}"
                     th:text="#{'property-type.' + ${listing.propertyType}}">APARTMENT
                </div>
                <div class="padding-left-small" th:if="!${listing.propertyTypeResidential}">-</div>
                <div th:replace="~{__components/listing :: listing-bed-bath-area(${listing})}"></div>
            </div>

            <div class="text-small address margin-top" th:text="${listing.address.street}">STREET</div>
            <div class="text-small address" th:if="${listing.address}">
                <span th:text="${listing.address?.neighbourhood?.name}">XXX</span>
                <span th:if="${listing.address?.neighbourhood} AND ${listing.address?.city}">-</span>
                <span th:text="${listing.address?.city?.name}">XXX</span>
            </div>

            <div class="margin-top text-small summary" th:if="${showSummary} AND ${listing.summary}"
                 th:text="${listing.summary}">SUMMARY
            </div>
        </a>
    </div>
</div>

<div class="flex" th:fragment="listing-bed-bath-area(listing)">
    <div th:if="${listing.bedrooms}">
        <span th:text="${listing.bedrooms}">00</span>
        <span th:text="#{page.listing.bedrooms-short}">BED</span>
    </div>
    <div class="padding-left-small" th:if="${listing.bedrooms} AND ${listing.bathrooms}">-</div>
    <div class="padding-left-small" th:if="${listing.bathrooms}">
        <span th:text="${listing.bathrooms}">00</span>
        <span th:text="#{page.listing.bathrooms-short}">BATH</span>
    </div>
    <div class="padding-left-small"
         th:if="(${listing.bedrooms} OR ${listing.bathrooms}) AND (${listing.lotArea} OR ${listing.propertyArea})">
        -
    </div>
    <div class="padding-left-small" th:if="${listing.lotArea} OR ${listing.propertyArea}">
        <span th:if="${listing.lotArea}" th:text="${listing.lotArea}">00</span>
        <span th:if="!${listing.lotArea}" th:text="${listing.propertyArea}">00</span>
        m<sup>2</sup>
    </div>
</div>

</body>
</html>
