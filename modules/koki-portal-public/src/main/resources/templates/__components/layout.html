<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="head" th:remove="tag">
    <link href="https://cdnjs.cloudflare.com" rel="preconnect">

    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="yes" name="mobile-web-app-capable"/>
    <meta http-equiv="content-language" th:content="${page.language}">

    <title th:text="${page.title}">TITLE</title>
    <meta name="description" th:content="${page.description}" th:if="${page.description}"/>
    <meta name="wutsi:page_name" th:content="${page.name}"/>
    <meta name="wutsi:hit_id" th:content="${page.hitId}"/>
    <meta property="og:site_name" th:content="${tenant.name}"/>
    <meta property="og:type" th:content="${page.type}"/>
    <meta property="og:title" th:content="${page.title}"/>
    <meta property="og:url" th:content="${page.url}" th:if="${page.url}"/>
    <meta property="og:description" th:content="${page.description}" th:if="${page.description}"/>
    <meta itemprop="image" property="og:image" th:content="${page.image}" th:if="${page.image}"/>
    <meta property="og:updated_time" th:content="${page.updatedTime}" th:if="${page.updatedTime}"/>

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(reg => console.log('SW registered!', reg))
                .catch(err => console.log('SW Failed!', err));
        }
    </script>

    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/js/bootstrap.bundle.min.js"></script>

    <script th:if="${page.assetBundleVersion}"
            th:src="${page.assetUrl} + '/js/koki-all-' + ${page.assetBundleVersion} + '.min.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/koki.js'"></script>
    <script th:if="!${page.assetBundleVersion}"
            th:src="${page.assetUrl} + '/js/widgets/koki-ajax-fragment.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-intl-tel.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-map.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-load-more.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-modal.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-modal-button.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-share-button.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-select2.js'"></script>
    <script th:if="!${page.assetBundleVersion}" th:src="${page.assetUrl} + '/js/widgets/koki-track.js'"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.8/css/bootstrap.min.css" rel="stylesheet"/>

    <link as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="preload">
    <link as="font" crossorigin
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-brand-400.woff2"
          rel="preload" type="font/woff2">
    <link as="font" crossorigin
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-brand-900.woff2"
          rel="preload" type="font/woff2">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet"/>

    <link rel="stylesheet"
          th:href="${page.assetUrl} + '/css/koki-all-' + ${page.assetBundleVersion} + '.min.css'"
          th:if="${page.assetBundleVersion}"/>
    <link rel="stylesheet" th:href="${page.assetUrl} + '/css/koki.css'" th:if="!${page.assetBundleVersion}"/>
    <link rel="stylesheet" th:href="${page.assetUrl} + '/css/agents.css'" th:if="!${page.assetBundleVersion}"/>
    <link rel="stylesheet" th:href="${page.assetUrl} + '/css/listings.css'" th:if="!${page.assetBundleVersion}"/>

    <link rel="shortcut icon" th:href="${tenant.iconTinyUrl}" th:if="${tenant?.iconTinyUrl}"/>
    <link href="/manifest.json" rel="manifest">
</div>

<nav class="navbar navbar-expand navbar-light fixed-top" id="navbar" th:fragment="navbar">
    <div class="navbar-brand" href="/">
        <span class="brand-name" th:if="!${tenant?.logoUrl}">KOKI</span>
        <img class="brand-logo" th:alt="${tenant.name}"
             th:if="${tenant?.logoTinyUrl}"
             th:src="${tenant.logoTinyUrl}"
             th:title="${tenant.name}"
        />
    </div>

    <ul class="navbar-nav ms-auto" th:if="${listing} AND ${page.name == 'page.listing'}">
        <li class="margin-right-small" th:if="${listing.publicUrl}">
            <button class="btn btn-sm btn-light" data-component-id="share-button"
                    id="btn-share-navbar"
                    th:data-modal-title="#{button.share}"
                    th:data-modal-url="'/share/modal?url=' + ${listing.publicUrl}"
                    th:data-url="${listing.publicUrl}"
            >
                <i class="fa-solid fa-share-nodes"></i>
                <span th:text="#{button.share}">SHARE</span>
            </button>
        </li>
    </ul>
</nav>

</body>
</html>
