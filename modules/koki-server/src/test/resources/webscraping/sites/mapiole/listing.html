<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8"/>
    <link href="/vite.svg" rel="icon" type="image/svg+xml"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="AGIICAM, votre agence immobilière de confiance au Cameroun. Achat, vente, location et gestion de biens immobiliers à Yaoundé, Douala, et plus encore."
          name="description"/>
    <meta content="agence immobilière Cameroun, immobilier Yaoundé, immobilier Douala, acheter maison Cameroun, louer appartement Cameroun, terrain à vendre Cameroun, AGIICAM"
          name="keywords"/>
    <title>AGIICAM | Agence Immobilière au Cameroun</title>
    <script crossorigin src="/assets/index-b2bf3c18.js" type="module"></script>
    <link href="/assets/index-7b93f7af.css" rel="stylesheet">
    <script type="module">
        window.onerror = (message, source, lineno, colno, errorObj) => {
            const errorDetails = errorObj ? JSON.stringify({
                name: errorObj.name,
                message: errorObj.message,
                stack: errorObj.stack,
                source,
                lineno,
                colno,
            }) : null;

            window.parent.postMessage({
                type: 'horizons-runtime-error',
                message,
                error: errorDetails
            }, '*');
        };
    </script>
    <script type="module">
        const observer = new MutationObserver((mutations) => {
            for (const mutation of mutations) {
                for (const addedNode of mutation.addedNodes) {
                    if (
                        addedNode.nodeType === Node.ELEMENT_NODE &&
                        (
                            addedNode.tagName?.toLowerCase() === 'vite-error-overlay' ||
                            addedNode.classList?.contains('backdrop')
                        )
                    ) {
                        handleViteOverlay(addedNode);
                    }
                }
            }
        });

        observer.observe(document.documentElement, {
            childList: true,
            subtree: true
        });

        function handleViteOverlay(node) {
            if (!node.shadowRoot) {
                return;
            }

            const backdrop = node.shadowRoot.querySelector('.backdrop');

            if (backdrop) {
                const overlayHtml = backdrop.outerHTML;
                const parser = new DOMParser();
                const doc = parser.parseFromString(overlayHtml, 'text/html');
                const messageBodyElement = doc.querySelector('.message-body');
                const fileElement = doc.querySelector('.file');
                const messageText = messageBodyElement ? messageBodyElement.textContent.trim() : '';
                const fileText = fileElement ? fileElement.textContent.trim() : '';
                const error = messageText + (fileText ? ' File:' + fileText : '');

                window.parent.postMessage({
                    type: 'horizons-vite-error',
                    error,
                }, '*');
            }
        }
    </script>
    <script type="module">
        const originalConsoleError = console.error;
        console.error = function (...args) {
            originalConsoleError.apply(console, args);

            let errorString = '';

            for (let i = 0; i < args.length; i++) {
                const arg = args[i];
                if (arg instanceof Error) {
                    errorString = arg.stack || `${arg.name}: ${arg.message}`;
                    break;
                }
            }

            if (!errorString) {
                errorString = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : String(arg)).join(' ');
            }

            window.parent.postMessage({
                type: 'horizons-console-error',
                error: errorString
            }, '*');
        };
    </script>
    <script type="module">
        const originalFetch = window.fetch;

        window.fetch = function (...args) {
            const url = args[0] instanceof Request ? args[0].url : args[0];

            // Skip WebSocket URLs
            if (url.startsWith('ws:') || url.startsWith('wss:')) {
                return originalFetch.apply(this, args);
            }

            return originalFetch.apply(this, args)
                .then(async response => {
                    const contentType = response.headers.get('Content-Type') || '';

                    // Exclude HTML document responses
                    const isDocumentResponse =
                        contentType.includes('text/html') ||
                        contentType.includes('application/xhtml+xml');

                    if (!response.ok && !isDocumentResponse) {
                        const responseClone = response.clone();
                        const errorFromRes = await responseClone.text();
                        const requestUrl = response.url;
                        console.error(`Fetch error from ${requestUrl}: ${errorFromRes}`);
                    }

                    return response;
                })
                .catch(error => {
                    if (!url.match(/.html?$/i)) {
                        console.error(error);
                    }

                    throw error;
                });
        };
    </script>
    <script type="module">
        if (window.navigation && window.self !== window.top) {
            window.navigation.addEventListener('navigate', (event) => {
                const url = event.destination.url;

                try {
                    const destinationUrl = new URL(url);
                    const destinationOrigin = destinationUrl.origin;
                    const currentOrigin = window.location.origin;

                    if (destinationOrigin === currentOrigin) {
                        return;
                    }
                } catch (error) {
                    return;
                }

                window.parent.postMessage({
                    type: 'horizons-navigation-error',
                    url,
                }, '*');
            });
        }
    </script>
</head>
<body>
<div id="root"></div>

</body>
</html>
