<!DOCTYPE HTML>
<html th:lang="${page.language}" xmlns:th="https://www.thymeleaf.org">

<head>
    <div th:replace="~{__components/layout :: head}"></div>
</head>

<body>
<div th:replace="~{__components/layout :: navbar}"></div>

<div class="room-info">
    <div class="carousel slide" id="image-gallery">
        <div class="carousel-indicators">
            <button data-bs-target="#image-gallery" th:aria-label="${image.title}"
                    th:classappend="${it.index == 0} ? 'active'"
                    th:data-bs-slide-to="${it.index}"
                    th:each="image,it: ${room.images}"
                    type="button"
            ></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item" th:classappend="${it.index == 0} ? 'active'" th:each="image,it: ${room.images}">
                <img class="d-block w-100" th:alt="${image.title}" th:src="${image.contentUrl}">
            </div>
            <div class="image-count">
                <i class="fa-regular fa-images"></i>
                <span th:text="${room.images.size()}">00</span>
            </div>
        </div>
        <button class="carousel-control-prev" data-bs-slide="prev" data-bs-target="#image-gallery" type="button">
            <span aria-hidden="true" class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" data-bs-slide="next" data-bs-target="#image-gallery" type="button">
            <span aria-hidden="true" class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <div class="room-info-details">
        <h1 th:text="${room.title}">TITLE</h1>
        <ul class="occupancy-container">
            <li>
                <span th:text="${room.maxGuests}">00</span> guest(s)
            </li>
            <li>
                <span>&#x2022;</span>
                <span th:text="${room.numberOfRooms}">00</span> bedrooms
            </li>
            <li>
                <span>&#x2022;</span>
                <span th:text="${room.numberOfBeds}">00</span> beds
            </li>
            <li>
                <span>&#x2022;</span>
                <span th:text="${room.numberOfRooms}">00</span> baths
            </li>
        </ul>

        <div class="margin-top border-top padding-top description-container">
            <div th:utext="${room.summary}">DESCRIPTION</div>
            <button class="btn btn-secondary margin-top" data-bs-target="#room-description-modal"
                    data-bs-toggle="modal">
                Show More
            </button>

            <div aria-hidden="true" aria-labelledby="room-description-modal-label" class="modal fade"
                 id="room-description-modal" tabindex="-1">
                <div class="modal-dialog modal-dialog-scrollable modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="room-description-modal-label">About this space</h1>
                            <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                        </div>
                        <div class="modal-body padding-2x" th:utext="${room.descriptionHtml}">DESCRIPTION</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="margin-top border-top padding-top amenity-container">
            <h2>What this place offers</h2>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-6" th:each="amenity:${topAmenities}">
                        <i th:class="${amenity.icon}" th:if="${amenity.icon}"></i>
                        <span th:text="${amenity.name}">AMENITY</span>
                    </div>
                </div>
            </div>
            <button class="btn btn-secondary margin-top" data-bs-target="#room-amenities-modal" data-bs-toggle="modal"
                    th:if="${topAmenities.size() < room.amenities.size()}">
                Show all <span th:text="${room.amenities.size()}"></span> amenities
            </button>

            <div aria-hidden="true" aria-labelledby="room-amenities-modal-label" class="modal fade"
                 id="room-amenities-modal" tabindex="-1">
                <div class="modal-dialog modal-dialog-scrollable modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="room-amenities-modal-label">What this place offers</h1>
                            <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                        </div>
                        <div class="modal-body padding-2x">
                            <div class="row">
                                <div class="col-md-6 col-12" th:each="category : ${categories}">
                                    <h3 th:text="${category.name}">CATEGORY</h3>
                                    <ul>
                                        <li th:each="amenity:${room.amenitiesByCategoryId(category.id)}"
                                            th:text="${amenity.name}">
                                            AMENITY
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="margin-top border-top padding-top map-container">
            <h2>Where you'll be</h2>
            <ul class="location-container">
                <li>
                    <span th:if="${room.neighborhood}" th:text="${room.neighborhood.name}">NEIBORHOOD</span>
                </li>
                <li>
                    <span th:if="${room.neighborhood}">&#x2022;</span>
                    <span th:text="${room.address.city.name}">CITY</span></li>
                <li>
                    <span>&#x2022;</span>
                    <span th:text="${room.address.countryName}">COUNTRY</span>
                </li>
            </ul>
            <div class="margin-top" data-component-id="map"
                 id="map"
                 th:data-latitude="${room.latitude}"
                 th:data-longitude="${room.longitude}"
                 th:data-show-marker="true"
                 th:data-zoom="18"
                 th:if="${room.hasGeoLocation}"
            >
            </div>
        </div>

        <div class="margin-top border-top padding-top host-container">
            <h2>Your host</h2>
            <div>
                <h3>Ray Sponsible</h3>
                <ul class="host-summary-container">
                    <li>
                        <i class="fa-solid fa-certificate success"></i>
                        Verified
                    </li>
                    <li>
                        <span>&#x2022;</span>
                        5 reservation(s)
                    </li>
                    <li>
                        <span>&#x2022;</span>
                        Respond within 2 hours
                    </li>
                </ul>
                <div class="margin-top">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua.
                    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                    consequat.
                </div>
                <button class="btn btn-secondary margin-top">
                    Message the Host
                </button>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" th:href="${page.assetUrl} + '/css/rooms.css'"/>
<link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet"/>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script th:src="${page.assetUrl} + '/js/koki-map.js'"></script>

</body>
</html>
