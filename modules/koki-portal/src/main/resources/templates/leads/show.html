<!DOCTYPE HTML>
<html th:lang="${page.language}" xmlns:th="https://www.thymeleaf.org">
<head>
    <div th:replace="~{__components/layout :: head}"></div>
</head>

<body>
<div th:replace="~{__components/layout :: navbar}"></div>
<div th:replace="~{__components/layout :: menubar('lead')}"></div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div th:replace="~{__components/lead :: lead-breadcrumb(${lead})}"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="widget lead-summary">
                <div class="widget-body">
                    <div class="text-right">
                        <a class="btn-call btn btn-light btn-sm" th:href="${lead.user.mobileUrl}">
                            <i class="fa-solid fa-mobile-screen-button"></i>
                            <span th:text="#{button.call}">CALL</span>
                        </a>
                        <a class="btn btn-sm btn-whatsapp" target="_blank" th:href="${lead.user.whatsappUrl}">
                            <i class="fa-brands fa-whatsapp"></i>
                            <span th:text="#{button.whatsapp}">Whatsapp</span>
                        </a>
                        <div th:replace="~{__components/lead :: lead-status-button(${lead})}"></div>
                    </div>
                    <h1 class="entity-title">
                        <span th:text="${lead.user.displayName}">NAME</span>
                    </h1>
                    <div class="flex margin-top">
                        <div>
                            <b th:text="#{page.lead.status}">Status</b><br/>
                            <div th:replace="~{__components/lead :: lead-status-badge(${lead})}"></div>
                            <br/>
                        </div>
                        <div class="margin-left-2x d-none d-md-block" th:if="${lead.user.email}">
                            <b th:text="#{page.lead.email}">EMAIL</b><br/>
                            <a th:href="'mailto:' + ${lead.user.email}" th:text="${lead.user.email}">EMAIL</a>
                        </div>
                    </div>
                    <div th:replace="~{__components/layout :: error-message(${error})}"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="widget">
                <div class="widget-body">
                    <div th:replace="~{__components/module :: tabs('main', true)}"></div>
                    <div th:replace="~{__components/module :: tabs-content('main', true, ${lead}, ${module})}"></div>
                    <div class="hidden" id="tab-details-content">
                        <table class="table">
                            <tr th:if="${lead.listing}">
                                <td width="20%"><b th:text="#{page.lead.listing}">Listing</b></td>
                                <td>
                                    <a class="listing-item" th:href="'/listings/' + ${lead.listing.id}">
                                        <div th:replace="~{__components/listing :: listing-item(${lead.listing})}">
                                        </div>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td><b th:text="#{page.lead.message}">Message</b></td>
                                <td th:utext="${lead.lastMessage.contentHtml}">HTML</td>
                            </tr>
                            <tr th:if="${lead.lastMessage.visitRequestedAt}">
                                <td><b th:text="#{page.lead.visit-request-at}">Request a Visit</b></td>
                                <td th:text="${lead.lastMessage.visitRequestedAtText}">HTML</td>
                            </tr>

                            <tr>
                                <td><b th:text="#{page.lead.status}">Status</b></td>
                                <td>
                                    <div th:replace="~{__components/lead :: lead-status-badge(${lead})}"></div>
                                </td>
                            </tr>
                            <tr>
                                <td width="20%"><b th:text="#{page.lead.display-name}">First Name</b></td>
                                <td th:text="${lead.user.displayName}">TYPE</td>
                            </tr>
                            <tr>
                                <td><b th:text="#{page.lead.phone-number}">Phone Number</b></td>
                                <td>
                                    <div class="flex">
                                        <span th:text="${lead.user.mobileText}">(XXX) XXX-XXXX</span>
                                        <a class="btn-call btn btn-light btn-sm margin-left"
                                           th:href="${lead.user.mobileUrl}"
                                           th:text="#{button.call}">CALL</a>

                                        <a class="btn btn-sm btn-whatsapp margin-left" target="_blank"
                                           th:href="${lead.user.whatsappUrl}">
                                            <i class="fa-brands fa-whatsapp"></i>
                                            <span th:text="#{button.whatsapp}">Whatsapp</span>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr th:if="${lead.user.email}">
                                <td><b th:text="#{page.lead.email}">Email</b></td>
                                <td>
                                    <a th:href="'mailto:' + ${lead.user.email}" th:text="${lead.user.email}">EMAIL</a>
                                </td>
                            </tr>
                            <tr th:if="${lead.user.location}">
                                <td><b th:text="#{page.lead.location}">ADDRESS</b></td>
                                <td th:text="${lead.user.location}">LOCATION</td>
                            </tr>
                            <tr th:if="${lead.source}">
                                <td><b th:text="#{page.lead.source}">Source</b></td>
                                <td th:text="#{'lead-source.' + ${lead.source}}">SOURCE</td>
                            </tr>
                            <tr th:if="${lead.nextVisitAtText}">
                                <td><b th:text="#{page.lead.next-visit-at}">Next Visit</b></td>
                                <td th:text="${lead.nextVisitAtText}">YYY-MM-DD</td>
                            </tr>
                            <tr th:if="${lead.nextContactAtText}">
                                <td><b th:text="#{page.lead.next-contact-at}">Next Communication</b></td>
                                <td th:text="${lead.nextContactAtText}">YYY-MM-DD</td>
                            </tr>

                            <tr>
                                <td><b th:text="#{page.lead.contacted-at}">Created At</b></td>
                                <td th:text="${lead.modifiedAtText}">HTML</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{__components/bootstrap :: toast(${toast})}"></div>
<div th:replace="~{__components/bootstrap :: modal}"></div>

</body>
</html>
