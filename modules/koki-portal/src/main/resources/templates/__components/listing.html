<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div class="widget" th:fragment="listing-breadcrumb(listing)">
    <div class="widget-body">
        <nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '>';">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/" th:text="#{module.home}">HOME</a></li>
                <li class="breadcrumb-item" th:if="${listing}"><a href="/listings"
                                                                  th:text="#{module.listing}">LISTING</a></li>
                <li class="breadcrumb-item active" th:if="${listing}">
                    <span th:text="${listing.listingNumber}">NUMBER</span>
                </li>
                <li class="breadcrumb-item active" th:if="!${listing}" th:text="#{module.listing}">Accounts</li>
            </ol>
        </nav>
    </div>
</div>


<div th:fragment="listing-status-badge(status)" th:remove="tag">
    <span class="badge text-bg-secondary"
          th:if="${status.name() == 'DRAFT'}"
          th:text="#{'listing-status.' + ${status}}">A LOUER</span>

    <span class="badge text-bg-warning" th:if="${status.name() == 'PUBLISHING'}"
          th:text="#{'listing-status.' + ${status}}">PUBLISHING</span>

    <span class="badge text-bg-primary"
          th:if="${status.name() == 'ACTIVE'} OR ${status.name() == 'ACTIVE_WITH_OFFER'} OR ${status.name() == 'PENDING'}"
          th:text="#{'listing-status.' + ${status}}">A LOUER</span>

    <span class="badge text-bg-success" th:if="${status.name() == 'RENTED'} OR ${status.name() == 'SOLD'}"
          th:text="#{'listing-status.' + ${status}}">A LOUER</span>

    <span class="badge text-bg-danger"
          th:if="${status == 'EXPIRED'} OR ${status.name() == 'WITHDRAWN'} OR ${status.name() == 'CANCELLED'}"
          th:text="#{'listing-status.' + ${status}}">A LOUER</span>
</div>

<div th:fragment="listing-type-badge(type)" th:remove="tag">
    <span class="badge text-bg-info margin-right" th:text="#{'listing-type.' + ${type}}">A LOUER</span>
</div>

<div th:fragment="listing-table(items, sold)" th:if="!${items.isEmpty()}">
    <table class="table">
        <tr class="d-none d-md-table-row">
            <th colspan="2" th:text="#{page.listing.address}" width="40%">ADDRESS</th>

            <th th:if="${sold}" th:text="#{page.listing.agent}">AGENT</th>
            <th th:if="${sold}" th:text="#{page.listing.transaction-date}">DATE</th>
            <th class="text-right" th:if="${sold}" th:text="#{page.listing.transaction-price}">PRICE</th>

            <th th:if="!${sold}" th:text="#{page.listing.description}" width="20%">DESCRIPTION</th>
            <th class="text-right" th:if="!${sold}" th:text="#{page.listing.price}">PRICE</th>
        </tr>
        <tr class="listing" th:each="listing : ${items}">
            <div th:replace="~{__components/listing :: listing-row(${listing}, ${sold})}"></div>
        </tr>
    </table>
</div>

<tr th:fragment="listing-row(listing, sold)" th:remove="tag">
    <td class="hero-image text-center">
        <a th:href="'/listings/' + ${listing.id}">
            <img th:if="${listing.heroImageUrl}" th:src="${listing.heroImageUrl}"/>
        </a>
    </td>
    <td>
        <a th:href="'/listings/' + ${listing.id}">
            <div th:utext="${listing.address?.toHtml(false)}">ADDRESS</div>

            <div th:if="!${listing.statusActive} AND !${sold}">
                <div th:replace="~{__components/listing :: listing-status-badge(${listing.status})}"></div>
            </div>

            <table border="0" class="d-block d-md-none margin-top-small text-small">
                <tr th:if="!${sold}">
                    <th th:text="#{page.listing.description}">DESC</th>
                    <td class="padding-left">
                        <div th:replace="~{__components/listing :: listing-bed-bath-area(${listing})}"></div>
                    </td>
                </tr>
                <tr th:if="!${sold} AND ${listing.price}">
                    <th th:text="#{page.listing.price}">PRICE</th>
                    <td class="padding-left" th:text="${listing.price.displayText}">$$$</td>
                </tr>

                <tr th:if="${sold} AND (${listing.sellerAgentUser} OR ${listing.buyerAgentUser})">
                    <th th:text="#{page.listing.agent}">AGENT</th>
                    <td class="padding-left">
                        <span th:if="${listing.isSeller(user)}" th:text="#{page.listing.agent-seller}">SELLER</span>
                        <span th:if="${listing.isBuyer(user)}" th:text="#{page.listing.agent-buyer}">BUYER</span>
                    </td>
                </tr>
                <tr th:if="${sold} AND ${listing.transactionDate}">
                    <th th:text="#{page.listing.transaction-date}">DATE</th>
                    <td class="padding-left" th:text="${listing.transactionDateText}">$$$</td>
                </tr>
                <tr th:if="${sold} AND ${listing.transactionPrice}">
                    <th th:text="#{page.listing.transaction-price}">PRICE</th>
                    <td class="padding-left" th:text="${listing.transactionPrice.displayText}">$$$</td>
                </tr>
            </table>
        </a>
    </td>

    <td class="d-none d-md-table-cell" th:if="${sold}">
        <a th:href="'/listings/' + ${listing.id}" th:if="${listing.sellerAgentUser} OR ${listing.buyerAgentUser}">
            <span th:if="${listing.isSeller(user)}" th:text="#{page.listing.agent-seller}">SELLER</span>
            <span th:if="${listing.isBuyer(user)}" th:text="#{page.listing.agent-buyer}">BUYER</span>
        </a>
    </td>
    <td class="d-none d-md-table-cell" th:if="${sold}">
        <a th:href="'/listings/' + ${listing.id}" th:text="${listing.transactionDateText}">YYYY-MM-DD</a>
    </td>
    <td class="text-right text-nowrap d-none d-md-table-cell" th:if="${sold}">
        <a th:href="'/listings/' + ${listing.id}" th:if="${listing.transactionPrice}">
            <div class="text-nowrap listing-price">
                <span th:text="${listing.transactionPrice.displayText}">$$</span>
            </div>
        </a>
    </td>

    <td class="d-none d-md-table-cell" th:if="!${sold}">
        <a th:href="'/listings/' + ${listing.id}">
            <div th:replace="~{__components/listing :: listing-bed-bath-area(${listing})}"></div>
        </a>
    </td>
    <td class="text-right text-nowrap d-none d-md-table-cell" th:if="!${sold}">
        <a th:href="'/listings/' + ${listing.id}" th:if="${listing.price}">
            <div class="text-nowrap listing-price">
                <span th:text="${listing.price.displayText}">$$</span>
            </div>
        </a>
    </td>
</tr>

<div class="flex" th:fragment="listing-bed-bath-area(listing)">
    <div class="margin-right-small"
         th:if="${listing.bedrooms}"
         th:text="${listing.bedrooms} + #{page.listing.bedrooms-abbreviation}">
        00
    </div>
    <div class="margin-right-small"
         th:if="${listing.bathrooms}"
         th:text="${listing.bathrooms} + #{page.listing.bathrooms-abbreviation}">
        00
    </div>
    <div th:if="${listing.lotArea} OR ${listing.propertyArea}">
        <span th:if="${listing.lotArea}" th:text="${listing.lotArea}">00</span>
        <span th:if="!${listing.lotArea}" th:text="${listing.propertyArea}">00</span>
        m<sup>2</sup>
    </div>
</div>
<div th:fragment="listing-summary(listing)" th:remove="tag">
    <div>
        <span th:replace="~{__components/listing :: listing-type-badge(${listing.listingType})}"></span>
        <span th:replace="~{__components/listing :: listing-status-badge(${listing.status})}"></span>
    </div>
    <div class="margin-top-small">
        <h1 class="margin-none listing-price" th:if="${listing.price}">
            <span th:text="${listing.price.displayText}">0000</span>
        </h1>

        <div class="margin-top-small">
            <span th:text="#{'property-type.' + ${listing.propertyType}}">PROPERTY_TYPE</span>
            <span th:if="${listing.furnitureType}">-</span>
            <span th:if="${listing.furnitureType}"
                  th:text="#{'furniture-type.' + ${listing.furnitureType}}">
                FURNITURE_TYPE
            </span>
        </div>
        <div class="text-larger" th:if="${listing.address}" th:utext="${listing.address.toHtml(false)}">
            ADDRESS
        </div>
        <div class="text-small margin-top-small">
            <span th:text="#{page.listing.number}">#</span>:
            <span th:text="${listing.listingNumber}">00000</span>
        </div>
        <div class="margin-top-small">
            <div class="float-right">
                <div class="flex">
                    <div class="text-center" th:if="${listing.bedrooms}">
                        <b th:text="${listing.bedrooms}">00</b>
                        <div class="text-small" th:text="#{page.listing.bedrooms}">BEDROOMS</div>
                    </div>
                    <div class="text-center margin-left" th:if="${listing.bathrooms}">
                        <b th:text="${listing.bathrooms}">00</b>
                        <div class="text-small" th:text="#{page.listing.bathrooms}">BATHROOMS</div>
                    </div>
                    <div class="text-center margin-left"
                         th:if="${listing.lotArea} OR ${listing.propertyArea}">
                        <b th:if="${listing.propertyArea}" th:text="${listing.propertyArea}">00</b>
                        <b th:if="${listing.lotArea} AND !${listing.propertyArea}"
                           th:text="${listing.lotArea}">
                            00
                        </b>
                        <div class="text-small">m<sup>2</sup></div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>

</body>
</html>
