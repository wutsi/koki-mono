<!DOCTYPE HTML>
<html th:lang="${page.language}" xmlns:th="https://www.thymeleaf.org">
<head>
    <div th:replace="~{__components/layout :: head}"></div>
</head>

<body>
<div th:replace="~{__components/layout :: navbar}"></div>
<div th:replace="~{__components/layout :: menubar('contact')}"></div>

<div class="container">
    <div class="row">
        <div class="col-12">
            <form class="form" method="post" th:action="@{/contacts/add-new}" th:object="${form}">
                <div class="form-body">
                    <div class="section">
                        <div class="section-body">
                            <div th:replace="~{__components/layout :: error-message(${error})}"></div>

                            <div class="section-item" th:if="${user?.hasPermission('account')}">
                                <label class="title" th:text="#{page.contact.account}">Account</label>
                                <select
                                    data-component-id="select2"
                                    data-url="/accounts/selector/search"
                                    th:field="*{accountId}"
                                >
                                    <option th:if="${account}"
                                            th:text="${account.name}"
                                            th:value="${account.id}">
                                        ACCOUNT
                                    </option>
                                </select>
                            </div>
                            <div class="section-item" th:if="${contactTypes}">
                                <label class="title">
                                    <span th:text="#{page.contact.contact_type}">Contact Type</span>
                                    <span class="required">*</span>
                                </label>
                                <select id="contactTypeId" name="contactTypeId" required>
                                    <option value=""></option>
                                    <option th:each="contactType : ${contactTypes}"
                                            th:selected="${contactType.id} == ${form.contactTypeId}"
                                            th:text="${contactType.title}"
                                            th:value="${contactType.id}">
                                        CONTACT TYPE
                                    </option>
                                </select>
                            </div>
                            <div class="section-item">
                                <label class="title">
                                    <span th:text="#{page.contact.first_name}">First Name</span>
                                    <span class="required">*</span>
                                </label>
                                <input maxlength="100" required th:field="*{firstName}"/>
                            </div>
                            <div class="section-item">
                                <label class="title">
                                    <span th:text="#{page.contact.last_name}">Last Name</span>
                                    <span class="required">*</span>
                                </label>
                                <input maxlength="100" required th:field="*{lastName}"/>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.email}">Email</label>
                                <input maxlength="100" th:field="*{email}" type="email"/>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.mobile}">Mobile</label>
                                <input maxlength="30" th:field="*{mobile}" type="tel"/>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.phone}">Phone</label>
                                <input maxlength="30" th:field="*{phone}" type="tel"/>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.contact_via}">Contact me via</label>
                                <div class="text-small" th:text="#{page.contact.contact_via.help}">
                                    Select your preferred communication method
                                </div>
                                <select th:field="*{preferredCommunicationMethod}">
                                    <option th:each="method : ${communicationMethods}"
                                            th:text="#{'preferred-communication-method.' + ${method}}"
                                            th:value="${method}">
                                        METHOD
                                    </option>
                                </select>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.language}">Language</label>
                                <select th:field="*{language}">
                                    <option value=""></option>
                                    <option th:each="language : ${languages}"
                                            th:text="${language.displayName}"
                                            th:value="${language.language}">
                                        LANGUAGE
                                    </option>
                                </select>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.country}">Country</label>
                                <select th:field="*{country}">
                                    <option value=""></option>
                                    <option th:each="country : ${countries}"
                                            th:text="${country.displayCountry}"
                                            th:value="${country.country}"
                                    >COUNTRY
                                    </option>
                                </select>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.city}">City</label>
                                <select data-city-id="cityId"
                                        data-component-id="address"
                                        data-country-id="country"
                                        th:field="*{cityId}"
                                >
                                    <option th:if="${city}" th:text="${cityName}" th:value="${city.id}"></option>
                                </select>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.street}">Street</label>
                                <input th:field="*{street}"/>
                            </div>
                            <div class="section-item">
                                <label class="title" th:text="#{page.contact.postal_code}">Postal Code</label>
                                <input maxlength="30" th:field="*{postalCode}"/>
                            </div>
                            <div class="section-item flex flex-space-between">
                                <a class="btn-cancel btn btn-light w-49-mobile" href="/contacts"
                                   th:text="#{button.cancel}">
                                    Cancel
                                </a>
                                <button class="btn btn-primary w-49-mobile" th:text="#{button.submit}" type="submit">
                                    Submit
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

    </div>
</div>

<script>
    $('#language').select2();
</script>
</body>
</html>
