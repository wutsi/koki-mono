<div class="tab-messages">
    <div class="margin-bottom flex flex-space-between">
        <button class="btn btn-sm btn-light" id="btn-message-refresh"
                onclick="kokiMessage.refresh()"
        >
            <i class="fa-solid fa-rotate"></i>
            Refresh
        </button>

        <select class="btn btn-sm btn-light" id="message-folder" onchange="kokiMessage.refresh()">
            <option value="inbox">Inbox</option>
            <option th:selected="${folder == 'archive'}" value="archive">Archive</option>
        </select>
    </div>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Date</th>
            <th colspan="2">From</th>
        </tr>
        </thead>
        <tbody id="message-container" th:data-refresh-url="${refreshUrl}">
        <tr class="message entity" th:each="message : ${messages}" th:id="'message-' + ${message.id}">
            <div th:replace="~{__components/message :: columns(${message}, false)}"></div>
        </tr>
        <tr th:replace="~{__components/message :: load-more(${moreUrl})}"></tr>
        </tbody>
    </table>
</div>

<div th:if="${testMode}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://use.fontawesome.com/releases/v6.6.0/css/all.css" rel="stylesheet"/>
    <link href="/css/koki.css" rel="stylesheet"/>
    <link href="/css/messages.css" rel="stylesheet"/>

    <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/koki.js"></script>
    <script src="/js/messages.js"></script>

    <div th:replace="~{__components/bootstrap :: modal}"></div>
</div>

