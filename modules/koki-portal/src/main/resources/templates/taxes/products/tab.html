<div class="tab-tax-products">
    <div class="margin-bottom flex flex-space-between">
        <a class="btn btn-light btn-sm btn-add-product"
           th:href="'javascript: koki_taxes_add_product(' + ${tax.id} + ')'"
           th:if="${user?.hasPermission('tax:manage')}">
            Add Product
        </a>
        <a class="btn btn-light btn-sm btn-create-invoice" id="btn-create-invoice"
           onclick="return confirm('Are you ready to invoice your client?')"
           th:href="'/tax-products/tab/create-invoice?tax-id=' + ${tax.id}"
           th:if="!${tax.invoiceId} AND ${user?.hasPermission('tax:manage')} AND ${user?.hasPermission('invoice:manage')}">
            Create Invoice
        </a>
    </div>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Product</th>
            <th>Description</th>
            <th>Unit Price</th>
            <th>Quantity</th>
            <th>Sub Total</th>
            <th></th>
        </tr>
        </thead>
        <tbody id="tax-product-list" th:data-tax-id="${tax.id}">
        <tr class="tax-product" th:each="taxProduct : ${taxProducts}" th:id="'tax-product-' + ${taxProduct.id}">
            <td th:replace="~{__components/tax :: tax-product-columns(${taxProduct})}"></td>
        </tr>
        </tbody>
    </table>
</div>

<div th:if="${testMode}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/file-icon-vectors@1.0.0/dist/file-icon-vivid.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet"/>
    <link href="/css/koki.css" rel="stylesheet"/>
    <link href="/css/forms.css" rel="stylesheet"/>

    <script defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="/js/koki.js"></script>
    <script src="/js/products.js"></script>
    <script src="/js/taxes.js"></script>

    <div th:replace="~{__components/bootstrap :: modal}"></div>
</div>
