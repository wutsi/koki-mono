<!DOCTYPE HTML>
<html th:lang="${page.language}" xmlns:th="https://www.thymeleaf.org">
<head>
    <div th:replace="~{__components/layout :: head}"></div>
</head>

<body>
<div th:replace="~{__components/layout :: navbar}"></div>
<div th:replace="~{__components/layout :: menubar('offer')}"></div>

<div class="container padding-bottom-8x">
    <div class="row">
        <div class="col-12">
            <form class="form padding-top-2x" method="post" th:action="@{/offers/create}" th:object="${form}">
                <div class="section">
                    <div class="section-body">
                        <input th:field="*{ownerId}" type="hidden"/>
                        <input th:field="*{ownerType}" type="hidden"/>
                        <input th:field="*{buyerAgentUserId}" type="hidden"/>
                        <input th:field="*{sellerAgentUserId}" type="hidden"/>
                        <input th:field="*{currency}" type="hidden"/>

                        <div class="section-item">
                            <h1 th:text="#{page.offer.create.title}">TITLE</h1>
                        </div>
                        <div class="margin section-item" th:if="${error}">
                            <div class="alert alert-danger" th:utext="${error}">ERROR</div>
                        </div>
                        <div class="section-item" th:if="${listing}">
                            <div th:replace="~{__components/offer :: offer-listing(${listing})}"></div>
                        </div>
                        <div class="section-item">
                            <label class="title" th:text="#{page.offer.submitted-to}">TO</label>
                            <div
                                th:replace="~{__components/user :: user-small-card(${listing.sellerAgentUser}, false)}"></div>
                        </div>
                        <div class="section-item">
                            <label class="title" th:text="#{page.offer.submitted-by}">BY</label>
                            <div th:replace="~{__components/user :: user-small-card(${user}, false)}"></div>
                        </div>
                        <div class="section-item">
                            <label class="title">
                                <span th:text="#{page.offer.buyer}">BUYER</span>
                                <span class="required">*</span>
                            </label>
                            <select
                                class="form-select"
                                data-component-id="select2"
                                data-url="/contacts/selector/search"
                                required
                                th:field="*{buyerContactId}">
                                <option th:if="${seller}"
                                        th:text="${seller.name}"
                                        th:value="${seller.id}">
                                    ACCOUNT
                                </option>
                            </select>
                        </div>
                        <div class="section-item">
                            <label class="title">
                                <span th:text="#{page.offer.amount}">ANOUNT</span>
                                <span class="required">*</span>
                            </label>
                            <div class="input-group">
                                <input class="form-control" required step="0" th:field="*{price}"
                                       type="number"/>
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        <span th:text="${tenant.currencySymbol}">XXX</span>
                                        <span class="margin-left-small"
                                              th:if="${form.pricePerMonth}"
                                              th:text="#{page.listing.rental-price-suffix} ">PER MONTH</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="section-item">
                            <label class="title" th:text="#{page.offer.expires-at}">EXPIRY</label>
                            <div class="text-small" th:text="#{page.offer.expires-at.help}">HELP</div>
                            <input class="form-control" th:field="*{expiresAt}" th:min="*{expiresAtMin}" type="date"/>
                        </div>
                        <div class="section-item">
                            <label class="title" th:text="#{page.offer.closing-at}">CLOSING</label>
                            <div class="text-small" th:text="#{page.offer.closing-at.help}">HELP</div>
                            <input class="form-control" th:field="*{closingAt}" th:min="*{expiresAtMin}" type="date"/>
                        </div>
                        <div class="section-item">
                            <label class="title" th:text="#{page.offer.contingencies}">CONTINGENCIES</label>
                            <textarea class="form-control" rows="5" th:field="*{contingencies}"></textarea>
                        </div>
                        <div class="section-item flex-space-between flex">
                            <button class="btn btn-primary w-49-mobile" id="btn-accept"
                                    th:text="#{button.submit}"
                                    type="submit">
                                SUBMIT
                            </button>
                            <a class="btn btn-light  w-49-mobile"
                               href="/offers"
                               th:text="#{button.cancel}">
                                CANCEL
                            </a>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

</body>
</html>
