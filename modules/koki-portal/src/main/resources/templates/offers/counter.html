<!DOCTYPE HTML>
<html th:lang="${page.language}" xmlns:th="https://www.thymeleaf.org">
<head>
    <div th:replace="~{__components/layout :: head}"></div>
</head>

<body>
<div th:replace="~{__components/layout :: navbar}"></div>
<div th:replace="~{__components/layout :: menubar('offer')}"></div>

<div class="container-fluid padding-bottom-8x">
    <div class="row">
        <div class="col-12">
            <div class="widget">
                <div class="widget-body">
                    <h1 th:text="#{page.offer.counter.title}">TITLE</h1>

                    <div class="margin" th:if="${error}">
                        <div class="alert alert-danger" th:utext="${error}">ERROR</div>
                    </div>

                    <form class="form padding-top-2x" method="post" th:action="@{/offers/counter}" th:object="${form}">
                        <input th:field="*{id}" type="hidden"/>
                        <input th:field="*{submittingParty}" type="hidden"/>

                        <table class="table">
                            <tr th:if="${offer.listing}">
                                <td>
                                    <b th:text="#{page.offer.listing}">LISTING</b>
                                </td>
                                <td>
                                    <div th:replace="~{__components/offer :: offer-listing(${offer.listing}, false)}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <b th:text="#{page.offer.submitted-by}">BY</b>
                                </td>
                                <td th:if="*{submittingParty.name() == 'BUYER'}">
                                    <div th:replace="~{__components/user :: user-small-card(${offer.buyerAgentUser})}">
                                    </div>
                                </td>
                                <td th:if="*{submittingParty.name() == 'SELLER'}">
                                    <div th:replace="~{__components/user :: user-small-card(${offer.sellerAgentUser})}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <b th:text="#{page.offer.submitted-to}">TO</b>
                                </td>
                                <td th:if="*{submittingParty.name() == 'BUYER'}">
                                    <div th:replace="~{__components/user :: user-small-card(${offer.sellerAgentUser})}">
                                    </div>
                                </td>
                                <td th:if="*{submittingParty.name() == 'SELLER'}">
                                    <div th:replace="~{__components/user :: user-small-card(${offer.buyerAgentUser})}">
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <b th:text="#{page.offer.amount}">AMOUNT</b>
                                    <span class="required">*</span>
                                </td>
                                <td>
                                    <div class="input-group">
                                        <input class="form-control" required step="0" th:field="*{price}"
                                               type="number"/>
                                        <div class="input-group-append">
                                            <div class="input-group-text">
                                                <span th:text="${tenant.currencySymbol}">XXX</span>
                                                <span class="margin-left-small"
                                                      th:if="${form.pricePerMonth}"
                                                      th:text="#{page.listing.rental-price-suffix} ">PER MONTH</span>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <b th:text="#{page.offer.expires-at}">EXPIRES</b>
                                    <span class="required">*</span>
                                </td>
                                <td>
                                    <input class="form-control" required th:field="*{expiresAt}"
                                           th:min="*{expiresAtMin}"
                                           type="date"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <b th:text="#{page.offer.contingencies}">CONTENGENGIES</b>
                                </td>
                                <td>
                                    <textarea class="form-control" rows="5" th:field="*{contingencies}"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="flex-space-between flex">
                                        <a class="btn btn-light margin-left w-49-mobile"
                                           th:href="'/offers/' + ${offer.id}"
                                           th:text="#{button.cancel}">
                                            CANCEL
                                        </a>

                                        <button class="btn btn-primary w-49-mobile" id="btn-accept"
                                                th:text="#{button.submit}"
                                                type="submit">
                                            SUBMIT
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>
